package nebula.client.module.impl.exploit.noswing;

import nebula.client.listener.bus.Listener;
import nebula.client.listener.bus.Subscribe;
import nebula.client.listener.event.net.EventPacket;
import nebula.client.module.Module;
import nebula.client.module.ModuleMeta;
import net.minecraft.network.play.client.C0APacketAnimation;

/**
 * @author Gavin
 * @since 08/20/23
 */
@SuppressWarnings("unused")
@ModuleMeta(name = "NoSwing",
  description = "Prevents you from swinging server-side")
public class NoSwingModule extends Module {

  @Subscribe
  private final Listener<EventPacket.Out> packetOut = event -> {
    if (event.packet() instanceof C0APacketAnimation packet) {
      if (packet.getEntityId() == mc.thePlayer.getEntityId())
        event.setCanceled(true);
    }
  };

}
