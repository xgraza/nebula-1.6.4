package nebula.client.module.impl.exploit.freeze;

import nebula.client.listener.bus.Listener;
import nebula.client.listener.bus.Subscribe;
import nebula.client.listener.event.net.EventPacket;
import nebula.client.listener.event.player.EventMove;
import nebula.client.module.Module;
import nebula.client.module.ModuleMeta;
import nebula.client.util.value.Setting;
import nebula.client.util.value.SettingMeta;
import net.minecraft.network.play.client.C03PacketPlayer;

/**
 * @author Gavin
 * @since 08/09/23
 */
@SuppressWarnings("unused")
@ModuleMeta(name = "Freeze",
  description = "Freezes your player in place")
public class FreezeModule extends Module {

  @SettingMeta("Packets")
  private final Setting<Boolean> packets = new Setting<>(
    false);

  @Subscribe
  private final Listener<EventMove> update = event -> {
    event.setX(0.0);
    event.setY(0.0);
    event.setZ(0.0);
    event.setCanceled(true);
  };

  @Subscribe
  private final Listener<EventPacket.Out> packetOut = event -> {
    if (packets.value() && event.packet() instanceof C03PacketPlayer) {
      event.setCanceled(true);
    }
  };
}
